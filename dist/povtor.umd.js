!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.povtor={})}(this,function(t){"use strict";t.retry=function(t){var e,n,o,r,i,a=new Promise(function(t,e){o=t,n=e}),u=t.retryTimeout,f=0,p=!1,c=t.retryAttempts;if(c&&c.length)i=c.length+1;else{c=null;var l=t.retryQty;i="number"==typeof l&&l>=0?l+1:-1}function s(){d.attempt=++f,d.wait=!1,d.valueWait=!0;try{(e=t.action.apply(t.actionContext||null,t.actionParams||[]))&&"object"==typeof e&&"function"==typeof e.then?e.then(m,v):m(e)}catch(t){v(t)}}function y(){var e;e=f?c?c.shift():u:t.delay,i>0&&i--,"number"!=typeof e||e<0?s():(d.wait=!0,r=setTimeout(s,e))}function m(e){var n;d.value=e,d.valueWait=!1,p||(n=t.retryTest,i?"function"==typeof n&&(n=n(e)):n=!1),n?y():o(e)}function v(e){d.error=e,d.valueWait=!1;var o=t.retryOnError;p||!i?o=!1:"function"==typeof o&&(o=o(e)),o?y():n(e)}var d={attempt:f,error:e,promise:a,stop:function(){return p||(r&&(clearTimeout(r),d.wait=!1),p=d.stopped=!0,d.valueWait||o(d.value)),a},stopped:!1,value:e,valueWait:!1,wait:!1};return y(),d},t.getPromiseField=function(t){return t.promise}});
//# sourceMappingURL=povtor.umd.js.map
