!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.povtor={})}(this,function(t){"use strict";t.retry=function(t){var e,n,o,r,i,a=new Promise(function(t,e){o=t,n=e}),u=t.retryTimeout,f=0,p=!1,c=t.retryAttempts;if(c&&c.length)i=c.length+1;else{c=null;var l=t.retryQty;i="number"==typeof l&&l>=0?l+1:-1}var s={attempt:f,error:e,promise:a,stop:function(){return p||(r&&(clearTimeout(r),s.wait=!1),p=s.stopped=!0,s.valueWait||o(s.value)),a},stopped:!1,value:e,valueWait:!1,wait:!1};function y(){s.attempt=++f,s.wait=!1,s.valueWait=!0;try{(e=t.action.apply(t.actionContext||null,t.actionParams||[]))&&"object"==typeof e&&"function"==typeof e.then?e.then(v,d):v(e)}catch(t){d(t)}}function m(){var e;e=f?c?c.shift():u:t.delay,i>0&&i--,"number"!=typeof e||e<0?y():(s.wait=!0,r=setTimeout(y,e))}function v(e){var n;s.value=e,s.valueWait=!1,p||(n=t.retryTest,i?"function"==typeof n&&(n=n(e)):n=!1),n?m():o(e)}function d(e){s.error=e,s.valueWait=!1;var o=t.retryOnError;p||!i?o=!1:"function"==typeof o&&(o=o(e)),o?m():n(e)}return m(),s},t.getPromiseField=function(t){return t.promise}});
//# sourceMappingURL=povtor.umd.js.map
