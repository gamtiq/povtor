!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.povtor={})}(this,function(t){"use strict";t.retry=function(t){var e,r,n,o,i,u=new Promise(function(t,e){n=t,r=e}),a=t.retryTimeout,f=0,s=!1,p=t.retryAttempts;if(p&&p.length)i=p.length+1;else{p=null;var l=t.retryQty;i="number"==typeof l&&l>=0?l+1:-1}var c={attempt:f,error:e,isError:!1,promise:u,result:[],settings:t,stop:function(){return s||(o&&(clearTimeout(o),c.wait=!1),s=c.stopped=!0,c.valueWait||n(c.value)),u},stopped:!1,value:e,valueWait:!1,wait:!1};function y(){c.attempt=++f,c.wait=!1,c.valueWait=!0;try{(e=t.action.apply(t.actionContext||null,t.actionParams||[]))&&"object"==typeof e&&"function"==typeof e.then?e.then(d,h):d(e)}catch(t){h(t)}}function m(){c.isError?r(c.error):n(c.value)}function v(){var e;if(f){if("function"==typeof(e=p?p.shift():a)&&!1===(e=e(c)))return m()}else e=t.delay;i>0&&i--,"number"!=typeof e||e<0?y():(c.wait=!0,o=setTimeout(y,e))}function d(e){var r;c.value=e,c.result.push({value:e,time:(new Date).getTime()}),c.isError=!1,c.valueWait=!1,s||(r=t.retryTest,i?"function"==typeof r&&(r=r(e,c)):r=!1),r?v():m()}function h(e){c.error=e,c.result.push({error:e,time:(new Date).getTime()}),c.isError=!0,c.valueWait=!1;var r=t.retryOnError;s||!i?r=!1:"function"==typeof r&&(r=r(e,c)),r?v():m()}return v(),c},t.getPromiseField=function(t){return t.promise}});
//# sourceMappingURL=povtor.umd.js.map
